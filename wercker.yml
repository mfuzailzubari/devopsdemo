# The container definition we want to use for developing our app
box:
  id: php
  ports:
    - "8080"

build:
  steps:
    - install-packages:
        packages: git
    - script:
        name: install composer
        code: curl -sS https://getcomposer.org/installer | sudo php -- --install-dir=/usr/local/bin --filename=composer
    - script:
        name: install dependencies
        code: composer install --no-interaction
    - internal/watch:
        code: php -S localhost:8080
        reload: true

deploy-dev:
  steps:
    - heroku-deploy:
        key: $HEROKU_KEY
        key-name: DEPLOY_KEY
        user: $HEROKU_USER
        app-name: $HEROKU_APP_NAME